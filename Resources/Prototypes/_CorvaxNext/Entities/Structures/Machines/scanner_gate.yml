- type: entity
  id: ScannerGate
  parent: [ConstructibleMachine, BaseStructure]
  name: scanner gate
  description: "Scans any item for prohibited traits. On the main sign you can see the inscription: \"NOT RADIODANGEROUS\"."
  placement:
    mode: AlignTileAny
  components:
    - type: RequireProjectileTarget
    - type: Damageable
      damageContainer: StructuralInorganic
      damageModifierSet: StructuralMetallic
    - type: Destructible
      thresholds:
      - trigger:
          !type:DamageTrigger
          damage: 200
        behaviors:
          - !type:DoActsBehavior
            acts: [ "Destruction" ]
      - trigger:
          !type:DamageTrigger
          damage: 100
        behaviors:
        - !type:DoActsBehavior
          acts: ["Destruction"]
        - !type:PlaySoundBehavior
          sound:
            collection: MetalBreak
    - type: ApcPowerReceiver
      powerLoad: 1000
    - type: ExtensionCableReceiver
    - type: Clickable
    - type: Transform
      noRot: false
    - type: Machine
      board: ScannerGateCircuitboard
    - type: Appearance
    - type: InteractionOutline
    - type: Sprite
      drawdepth: Overdoors
      sprite: _CorvaxNext/Objects/Structures/Machines/scanner_gate.rsi
      layers:
        - state: scangate
        - state: scangate_idle
          map:
            - enum.ScannerGateVisualLayers.Status
        - state: scangate_open
          map:
            - enum.WiresVisualLayers.MaintenancePanel
    - type: Icon
      sprite: _CorvaxNext/Objects/Structures/Machines/scanner_gate.rsi
      state: icon
    - type: Fixtures
      fixtures:
        fix1:
          hard: true
          density: 1000
          shape:
            !type:PhysShapeAabb
            bounds: "-0.49,-0.25,-0.44,0.25"
          mask:
          - MachineMask
          layer:
          - MachineLayer
        fix2:
          hard: true
          density: 1000
          shape:
            !type:PhysShapeAabb
            bounds: "0.44,-0.25,0.49,0.25"
          mask:
          - MachineMask
          layer:
          - MachineLayer
        fix3:
          hard: true
          shape:
            !type:PhysShapeAabb
            bounds: "-0.49,-0.49,0.49,0.49"
          mask:
          - TabletopMachineMask
          layer:
          - TabletopMachineLayer
        scangate:
          hard: false
          shape:
            !type:PhysShapeAabb
            bounds: "-0.46,-0.2,0.46,0.2"
          mask:
          - ItemMask
          layer:
          - MachineLayer
    - type: AccessReader
      access: [["Command"], ["Security"]]
    - type: ScannerGate
      fixtureId: scangate
      blacklist:
        components:
          - Gun
          - ExplodeOnTrigger
      whitelist:
        tags:
          - Nonmetallic
    - type: WiresPanel
    - type: WiresVisuals
    - type: Wires
      boardName: wires-board-name-scangate
      layoutId: ScannerGate
    - type: UserInterface
      interfaces:
        enum.WiresUiKey.Key:
          type: WiresBoundUserInterface
    - type: Electrified
      usesApcPower: true
      shockDamage: 2
      probability: 0.8
    - type: DeviceLinkSource
      ports:
        - GateTrigger
        - GatePassed
        - GateDenied
    - type: DeviceNetwork
      deviceNetId: Wireless
      receiveFrequencyId: BasicDevice
    - type: WirelessNetworkConnection
      range: 200

- type: entity
  id: ScannerGateAcorp
  parent: ScannerGate
  name: scanner gate
  description: "Scans any item for prohibited traits. On the main sign you can see the inscription: \"NOT RADIODANGEROUS\"."
  placement:
    mode: AlignTileAny
  components:
    - type: AccessReader
      access: [["AcorpCommand"], ["AcorpSecurity"]]